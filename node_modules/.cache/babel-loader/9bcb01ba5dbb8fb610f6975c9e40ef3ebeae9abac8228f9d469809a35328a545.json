{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\\\uC9C0\\uB3C4\\uAE30\\uBC18\\uC0AC\\uC774\\uD2B8\\uB9CC\\uB4E4\\uAE30\\\\src\\\\components\\\\GoogleMap.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState, useCallback } from 'react';\nimport styled from 'styled-components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MapContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  min-height: 400px;\n  position: relative;\n  overflow: visible;\n  background: #f0f0f0;\n`;\n_c = MapContainer;\nconst FallbackMap = styled.div`\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(45deg, #e5e7eb 25%, transparent 25%), \n              linear-gradient(-45deg, #e5e7eb 25%, transparent 25%), \n              linear-gradient(45deg, transparent 75%, #e5e7eb 75%), \n              linear-gradient(-45deg, transparent 75%, #e5e7eb 75%);\n  background-size: 20px 20px;\n  background-position: 0 0, 0 10px, 10px -10px, -10px 0px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #6b7280;\n  font-size: 1.2rem;\n  font-weight: 500;\n`;\n_c2 = FallbackMap;\nconst MapError = styled.div`\n  text-align: center;\n  padding: 2rem;\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  max-width: 400px;\n`;\n_c3 = MapError;\nconst GoogleMap = ({\n  properties,\n  onMarkerClick,\n  onClusterClick,\n  selectedMarkerId,\n  setSelectedMarkerId,\n  selectedClusterId,\n  setSelectedClusterId\n}) => {\n  _s();\n  const mapRef = useRef(null);\n  const mapInstance = useRef(null);\n  const markersRef = useRef([]);\n  const isClusterClicking = useRef(false);\n  const [isMapLoaded, setIsMapLoaded] = useState(false);\n  const [mapError, setMapError] = useState(null);\n\n  // 가격 포맷팅 함수\n  const formatPrice = useCallback(price => {\n    if (price >= 100000000) {\n      return `${Math.floor(price / 100000000)}억원`;\n    } else if (price >= 10000) {\n      return `${Math.floor(price / 10000)}만원`;\n    }\n    return `${price.toLocaleString()}원`;\n  }, []);\n\n  // 마커 클러스터링 함수\n  const createClusterMarker = useCallback((properties, center) => {\n    const clusterId = properties.map(p => p.id).join(',');\n    const isSelected = selectedClusterId === clusterId;\n    const marker = new window.google.maps.Marker({\n      position: center,\n      map: mapInstance.current,\n      icon: {\n        url: 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(isSelected ? `<svg width=\"44\" height=\"44\" viewBox=\"0 0 44 44\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <circle cx=\"22\" cy=\"22\" r=\"20\" fill=\"white\" stroke=\"#111\" stroke-width=\"3\"/>\n                <text x=\"22\" y=\"26\" text-anchor=\"middle\" fill=\"#111\" font-family=\"Arial, sans-serif\" font-size=\"14\" font-weight=\"bold\">${properties.length}</text>\n              </svg>` : `<svg width=\"40\" height=\"40\" viewBox=\"0 0 40 40\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <circle cx=\"20\" cy=\"20\" r=\"18\" fill=\"#2563eb\" stroke=\"#1e40af\" stroke-width=\"3\"/>\n                <text x=\"20\" y=\"26\" text-anchor=\"middle\" fill=\"white\" font-family=\"Arial, sans-serif\" font-size=\"14\" font-weight=\"bold\">${properties.length}</text>\n              </svg>`),\n        scaledSize: isSelected ? new window.google.maps.Size(44, 44) : new window.google.maps.Size(40, 40),\n        anchor: isSelected ? new window.google.maps.Point(22, 22) : new window.google.maps.Point(20, 20)\n      }\n    });\n\n    // 클러스터 InfoWindow 생성\n    const infoWindow = new window.google.maps.InfoWindow({\n      content: `\n        <div style=\"padding: 10px; max-width: 250px; font-family: Arial, sans-serif;\">\n          <div style=\"font-weight: bold; font-size: 14px; margin-bottom: 5px; color: #1f2937;\">\n            ${properties.length}개 매물 클러스터\n          </div>\n          <div style=\"font-size: 12px; color: #6b7280; margin-bottom: 5px;\">\n            클릭하여 상세보기\n          </div>\n          <div style=\"font-size: 11px; color: #6b7280;\">\n            ${properties.slice(0, 3).map(p => p.title).join(', ')}\n            ${properties.length > 3 ? ` 외 ${properties.length - 3}개` : ''}\n          </div>\n        </div>\n      `\n    });\n\n    // 클러스터 마커 hover 이벤트\n    marker.addListener('mouseover', () => {\n      infoWindow.open(mapInstance.current, marker);\n    });\n    marker.addListener('mouseout', () => {\n      infoWindow.close();\n    });\n    marker.addListener('click', () => {\n      console.log(`클러스터 클릭: ${properties.length}개 매물`);\n      isClusterClicking.current = true;\n      if (properties.length === 1) {\n        if (onMarkerClick) {\n          onMarkerClick(properties[0]);\n        }\n      } else {\n        if (onClusterClick) {\n          onClusterClick(properties);\n        }\n      }\n      setTimeout(() => {\n        isClusterClicking.current = false;\n      }, 1500);\n    });\n    return marker;\n  }, [onMarkerClick, onClusterClick, selectedClusterId, formatPrice]);\n\n  // 마커 클러스터링 로직\n  const clusterMarkers = (markers, zoom) => {\n    const clusters = [];\n    let clusterRadius;\n    if (zoom < 8) {\n      clusterRadius = 0.05;\n    } else if (zoom < 10) {\n      clusterRadius = 0.02;\n    } else if (zoom < 12) {\n      clusterRadius = 0.01;\n    } else if (zoom < 14) {\n      clusterRadius = 0.005;\n    } else if (zoom < 16) {\n      clusterRadius = 0.002;\n    } else if (zoom < 18) {\n      clusterRadius = 0.001;\n    } else {\n      clusterRadius = 0.00001;\n    }\n    properties.forEach((property, index) => {\n      let addedToCluster = false;\n      for (const cluster of clusters) {\n        const distance = Math.sqrt(Math.pow(property.location.lat - cluster.center.lat, 2) + Math.pow(property.location.lng - cluster.center.lng, 2));\n        if (distance < clusterRadius) {\n          cluster.properties.push(property);\n          cluster.center = {\n            lat: cluster.properties.reduce((sum, p) => sum + p.location.lat, 0) / cluster.properties.length,\n            lng: cluster.properties.reduce((sum, p) => sum + p.location.lng, 0) / cluster.properties.length\n          };\n          addedToCluster = true;\n          break;\n        }\n      }\n      if (!addedToCluster) {\n        clusters.push({\n          center: property.location,\n          properties: [property]\n        });\n      }\n    });\n    return clusters;\n  };\n\n  // 지도 초기화\n  const initMap = useCallback(() => {\n    var _window$google;\n    console.log('지도 초기화 시도...');\n    console.log('mapRef.current:', mapRef.current);\n    console.log('window.google:', window.google);\n    console.log('window.google.maps:', (_window$google = window.google) === null || _window$google === void 0 ? void 0 : _window$google.maps);\n    if (!mapRef.current) {\n      console.log('mapRef가 없음');\n      return false;\n    }\n    if (!window.google) {\n      console.log('Google Maps API가 로드되지 않음');\n      return false;\n    }\n    if (!window.google.maps) {\n      console.log('Google Maps 객체가 없음');\n      return false;\n    }\n    if (mapInstance.current) {\n      console.log('기존 지도 인스턴스 업데이트');\n      updateMarkers();\n      return true;\n    }\n    try {\n      console.log('새 지도 인스턴스 생성 시작...');\n      markersRef.current.forEach(marker => {\n        if (marker && marker.setMap) {\n          marker.setMap(null);\n        }\n      });\n      markersRef.current = [];\n      const map = new window.google.maps.Map(mapRef.current, {\n        center: {\n          lat: 37.5665,\n          lng: 126.9780\n        },\n        zoom: 10,\n        mapTypeId: window.google.maps.MapTypeId.ROADMAP,\n        zoomControl: true,\n        mapTypeControl: false,\n        scaleControl: false,\n        streetViewControl: false,\n        rotateControl: false,\n        fullscreenControl: false,\n        gestureHandling: 'greedy',\n        backgroundColor: '#f0f0f0',\n        disableDefaultUI: false,\n        maxZoom: 20,\n        minZoom: 8,\n        tilt: 0,\n        zoomControlOptions: {\n          position: window.google.maps.ControlPosition.RIGHT_TOP\n        },\n        disableDoubleClickZoom: false,\n        restriction: {\n          latLngBounds: {\n            north: 38.0,\n            south: 34.5,\n            east: 131.0,\n            west: 125.0\n          },\n          strictBounds: false\n        }\n      });\n      console.log('지도 인스턴스 생성 완료:', map);\n      mapInstance.current = map;\n\n      // 지도가 완전히 로드된 후 마커 생성\n      map.addListener('idle', () => {\n        console.log('지도 로드 완료, 마커 생성 시작');\n        createMarkers();\n      });\n      map.addListener('zoom_changed', () => {\n        if (isClusterClicking.current) {\n          return;\n        }\n        markersRef.current.forEach(marker => {\n          if (marker && marker.setMap) {\n            marker.setMap(null);\n          }\n        });\n        markersRef.current = [];\n        setTimeout(() => {\n          if (!isClusterClicking.current) {\n            createMarkers();\n          }\n        }, 300);\n      });\n      console.log('지도 초기화 완료');\n      setIsMapLoaded(true);\n      setMapError(null);\n      return true;\n    } catch (error) {\n      console.error('지도 초기화 오류:', error);\n      setMapError('지도를 로드할 수 없습니다. Google Maps API를 확인해주세요.');\n      setIsMapLoaded(false);\n      return false;\n    }\n  }, []);\n  const createMarkers = () => {\n    if (!mapInstance.current) {\n      console.log('mapInstance가 없어서 마커 생성 불가');\n      return;\n    }\n    console.log('마커 생성 시작, properties 개수:', properties.length);\n    const currentZoom = mapInstance.current.getZoom() || 15;\n    console.log('현재 줌 레벨:', currentZoom);\n    if (currentZoom >= 18) {\n      console.log('개별 마커 생성 모드');\n      properties.forEach((property, index) => {\n        console.log(`마커 ${index + 1} 생성:`, property.title, property.location);\n        const isSelected = selectedMarkerId === property.id;\n        const marker = new window.google.maps.Marker({\n          position: property.location,\n          map: mapInstance.current,\n          title: property.title,\n          icon: {\n            url: 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(isSelected ? `<svg width=\"44\" height=\"44\" viewBox=\"0 0 44 44\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><circle cx=\"22\" cy=\"22\" r=\"20\" fill=\"white\" stroke=\"#111\" stroke-width=\"3\"/><text x=\"22\" y=\"29\" text-anchor=\"middle\" fill=\"#111\" font-family=\"Arial, sans-serif\" font-size=\"16\" font-weight=\"bold\">1</text></svg>` : `<svg width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><circle cx=\"15\" cy=\"15\" r=\"13\" fill=\"#2563eb\" stroke=\"#1e40af\" stroke-width=\"2\"/><text x=\"15\" y=\"19\" text-anchor=\"middle\" fill=\"white\" font-family=\"Arial, sans-serif\" font-size=\"10\" font-weight=\"bold\">1</text></svg>`),\n            scaledSize: isSelected ? new window.google.maps.Size(44, 44) : new window.google.maps.Size(30, 30),\n            anchor: isSelected ? new window.google.maps.Point(22, 22) : new window.google.maps.Point(15, 15)\n          }\n        });\n\n        // InfoWindow 생성\n        const infoWindow = new window.google.maps.InfoWindow({\n          content: `\n            <div style=\"padding: 10px; max-width: 200px; font-family: Arial, sans-serif;\">\n              <div style=\"font-weight: bold; font-size: 14px; margin-bottom: 5px; color: #1f2937;\">\n                ${property.title}\n              </div>\n              <div style=\"font-size: 12px; color: #6b7280; margin-bottom: 5px;\">\n                ${property.address.split(' ').slice(0, 3).join(' ')}\n              </div>\n              <div style=\"font-size: 12px; color: #2563eb; font-weight: bold;\">\n                ${property.type === 'rent' ? `보증금: ${formatPrice(property.deposit || 0)} / 월세: ${formatPrice(property.price)}` : `매매가: ${formatPrice(property.price)}`}\n              </div>\n              <div style=\"font-size: 11px; color: #6b7280; margin-top: 3px;\">\n                ${Math.round(property.area / 3.3058)}평 (${property.area}㎡)\n                ${property.bedrooms ? ` / ${property.bedrooms}침실` : ''}\n                ${property.bathrooms ? ` / ${property.bathrooms}욕실` : ''}\n              </div>\n            </div>\n          `\n        });\n\n        // 마커 hover 이벤트\n        marker.addListener('mouseover', () => {\n          infoWindow.open(mapInstance.current, marker);\n        });\n        marker.addListener('mouseout', () => {\n          infoWindow.close();\n        });\n        if (onMarkerClick) {\n          marker.addListener('click', () => {\n            console.log(`개별 마커 클릭됨: ${property.id} - ${property.title}`);\n            isClusterClicking.current = true;\n            if (setSelectedMarkerId) setSelectedMarkerId(property.id);\n            if (setSelectedClusterId) setSelectedClusterId('');\n            onMarkerClick(property);\n            setTimeout(() => {\n              isClusterClicking.current = false;\n            }, 1500);\n          });\n        }\n        markersRef.current.push(marker);\n      });\n      console.log('개별 마커 생성 완료, 총 마커 개수:', markersRef.current.length);\n    } else {\n      console.log('클러스터 모드');\n      const clusters = clusterMarkers([], currentZoom);\n      console.log('생성된 클러스터 개수:', clusters.length);\n      clusters.forEach((cluster, clusterIndex) => {\n        console.log(`클러스터 ${clusterIndex + 1}: ${cluster.properties.length}개 매물`);\n        if (cluster.properties.length === 1) {\n          const property = cluster.properties[0];\n          const isSelected = selectedMarkerId === property.id;\n          const marker = new window.google.maps.Marker({\n            position: property.location,\n            map: mapInstance.current,\n            title: property.title,\n            icon: {\n              url: 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(isSelected ? `<svg width=\"44\" height=\"44\" viewBox=\"0 0 44 44\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><circle cx=\"22\" cy=\"22\" r=\"20\" fill=\"white\" stroke=\"#111\" stroke-width=\"3\"/><text x=\"22\" y=\"29\" text-anchor=\"middle\" fill=\"#111\" font-family=\"Arial, sans-serif\" font-size=\"16\" font-weight=\"bold\">1</text></svg>` : `<svg width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><circle cx=\"15\" cy=\"15\" r=\"13\" fill=\"#2563eb\" stroke=\"#1e40af\" stroke-width=\"2\"/><text x=\"15\" y=\"19\" text-anchor=\"middle\" fill=\"white\" font-family=\"Arial, sans-serif\" font-size=\"10\" font-weight=\"bold\">1</text></svg>`),\n              scaledSize: isSelected ? new window.google.maps.Size(44, 44) : new window.google.maps.Size(30, 30),\n              anchor: isSelected ? new window.google.maps.Point(22, 22) : new window.google.maps.Point(15, 15)\n            }\n          });\n\n          // InfoWindow 생성\n          const infoWindow = new window.google.maps.InfoWindow({\n            content: `\n              <div style=\"padding: 10px; max-width: 200px; font-family: Arial, sans-serif;\">\n                <div style=\"font-weight: bold; font-size: 14px; margin-bottom: 5px; color: #1f2937;\">\n                  ${property.title}\n                </div>\n                <div style=\"font-size: 12px; color: #6b7280; margin-bottom: 5px;\">\n                  ${property.address.split(' ').slice(0, 3).join(' ')}\n                </div>\n                <div style=\"font-size: 12px; color: #2563eb; font-weight: bold;\">\n                  ${property.type === 'rent' ? `보증금: ${formatPrice(property.deposit || 0)} / 월세: ${formatPrice(property.price)}` : `매매가: ${formatPrice(property.price)}`}\n                </div>\n                <div style=\"font-size: 11px; color: #6b7280; margin-top: 3px;\">\n                  ${Math.round(property.area / 3.3058)}평 (${property.area}㎡)\n                  ${property.bedrooms ? ` / ${property.bedrooms}침실` : ''}\n                  ${property.bathrooms ? ` / ${property.bathrooms}욕실` : ''}\n                </div>\n              </div>\n            `\n          });\n\n          // 마커 hover 이벤트\n          marker.addListener('mouseover', () => {\n            infoWindow.open(mapInstance.current, marker);\n          });\n          marker.addListener('mouseout', () => {\n            infoWindow.close();\n          });\n          if (onMarkerClick) {\n            marker.addListener('click', () => {\n              console.log(`클러스터링된 단일 마커 클릭됨: ${property.id} - ${property.title}`);\n              isClusterClicking.current = true;\n              if (setSelectedMarkerId) setSelectedMarkerId(property.id);\n              if (setSelectedClusterId) setSelectedClusterId('');\n              onMarkerClick(property);\n              setTimeout(() => {\n                isClusterClicking.current = false;\n              }, 1500);\n            });\n          }\n          markersRef.current.push(marker);\n        } else {\n          const clusterMarker = createClusterMarker(cluster.properties, cluster.center);\n          markersRef.current.push(clusterMarker);\n        }\n      });\n      console.log('클러스터 마커 생성 완료, 총 마커 개수:', markersRef.current.length);\n    }\n  };\n  const updateMarkers = () => {\n    if (!mapInstance.current) return;\n    markersRef.current.forEach(marker => {\n      if (marker && marker.setMap) {\n        marker.setMap(null);\n      }\n    });\n    markersRef.current = [];\n    createMarkers();\n  };\n  const checkAndInit = useCallback(() => {\n    console.log('Google Maps API 확인 중...');\n    if (window.google && window.google.maps) {\n      console.log('Google Maps API 로드됨, 지도 초기화 시도');\n      if (initMap()) {\n        console.log('지도 초기화 성공');\n        return;\n      }\n    } else {\n      console.log('Google Maps API 아직 로드되지 않음, 재시도...');\n    }\n    setTimeout(checkAndInit, 100);\n  }, [initMap]);\n  useEffect(() => {\n    checkAndInit();\n    return () => {\n      markersRef.current.forEach(marker => {\n        if (marker && marker.setMap) {\n          marker.setMap(null);\n        }\n      });\n      markersRef.current = [];\n    };\n  }, [checkAndInit]);\n\n  // properties가 변경될 때 마커 업데이트\n  useEffect(() => {\n    if (mapInstance.current && isMapLoaded) {\n      updateMarkers();\n    }\n  }, [properties, selectedMarkerId, selectedClusterId, isMapLoaded]);\n  return /*#__PURE__*/_jsxDEV(MapContainer, {\n    children: !isMapLoaded && mapError ? /*#__PURE__*/_jsxDEV(FallbackMap, {\n      children: /*#__PURE__*/_jsxDEV(MapError, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '1rem',\n            fontSize: '1.5rem'\n          },\n          children: \"\\uD83D\\uDDFA\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 548,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '0.5rem',\n            fontWeight: 'bold'\n          },\n          children: \"\\uC9C0\\uB3C4 \\uB85C\\uB4DC \\uC2E4\\uD328\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 549,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '0.9rem',\n            color: '#6b7280'\n          },\n          children: mapError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 550,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setMapError(null);\n            setIsMapLoaded(false);\n            checkAndInit();\n          },\n          style: {\n            marginTop: '1rem',\n            padding: '0.5rem 1rem',\n            background: '#2563eb',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: 'pointer'\n          },\n          children: \"\\uB2E4\\uC2DC \\uC2DC\\uB3C4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 551,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 547,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 546,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mapRef,\n      style: {\n        width: '100%',\n        height: '100%'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 572,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 544,\n    columnNumber: 5\n  }, this);\n};\n_s(GoogleMap, \"GhnMtgUf8AmZenibXKSDOMxjEzY=\");\n_c4 = GoogleMap;\nexport default GoogleMap;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"MapContainer\");\n$RefreshReg$(_c2, \"FallbackMap\");\n$RefreshReg$(_c3, \"MapError\");\n$RefreshReg$(_c4, \"GoogleMap\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useCallback","styled","jsxDEV","_jsxDEV","MapContainer","div","_c","FallbackMap","_c2","MapError","_c3","GoogleMap","properties","onMarkerClick","onClusterClick","selectedMarkerId","setSelectedMarkerId","selectedClusterId","setSelectedClusterId","_s","mapRef","mapInstance","markersRef","isClusterClicking","isMapLoaded","setIsMapLoaded","mapError","setMapError","formatPrice","price","Math","floor","toLocaleString","createClusterMarker","center","clusterId","map","p","id","join","isSelected","marker","window","google","maps","Marker","position","current","icon","url","encodeURIComponent","length","scaledSize","Size","anchor","Point","infoWindow","InfoWindow","content","slice","title","addListener","open","close","console","log","setTimeout","clusterMarkers","markers","zoom","clusters","clusterRadius","forEach","property","index","addedToCluster","cluster","distance","sqrt","pow","location","lat","lng","push","reduce","sum","initMap","_window$google","updateMarkers","setMap","Map","mapTypeId","MapTypeId","ROADMAP","zoomControl","mapTypeControl","scaleControl","streetViewControl","rotateControl","fullscreenControl","gestureHandling","backgroundColor","disableDefaultUI","maxZoom","minZoom","tilt","zoomControlOptions","ControlPosition","RIGHT_TOP","disableDoubleClickZoom","restriction","latLngBounds","north","south","east","west","strictBounds","createMarkers","error","currentZoom","getZoom","address","split","type","deposit","round","area","bedrooms","bathrooms","clusterIndex","clusterMarker","checkAndInit","children","style","marginBottom","fontSize","fileName","_jsxFileName","lineNumber","columnNumber","fontWeight","color","onClick","marginTop","padding","background","border","borderRadius","cursor","ref","width","height","_c4","$RefreshReg$"],"sources":["C:/Users/user/지도기반사이트만들기/src/components/GoogleMap.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState, useCallback } from 'react';\nimport styled from 'styled-components';\nimport { Property } from '../types';\n\nconst MapContainer = styled.div`\n  width: 100%;\n  height: 100%;\n  min-height: 400px;\n  position: relative;\n  overflow: visible;\n  background: #f0f0f0;\n`;\n\nconst FallbackMap = styled.div`\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(45deg, #e5e7eb 25%, transparent 25%), \n              linear-gradient(-45deg, #e5e7eb 25%, transparent 25%), \n              linear-gradient(45deg, transparent 75%, #e5e7eb 75%), \n              linear-gradient(-45deg, transparent 75%, #e5e7eb 75%);\n  background-size: 20px 20px;\n  background-position: 0 0, 0 10px, 10px -10px, -10px 0px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: #6b7280;\n  font-size: 1.2rem;\n  font-weight: 500;\n`;\n\nconst MapError = styled.div`\n  text-align: center;\n  padding: 2rem;\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n  max-width: 400px;\n`;\n\ninterface GoogleMapProps {\n  properties: Property[];\n  onMarkerClick?: (property: Property) => void;\n  onClusterClick?: (properties: Property[]) => void;\n  selectedMarkerId?: string | null;\n  setSelectedMarkerId?: (id: string) => void;\n  selectedClusterId?: string | null;\n  setSelectedClusterId?: (id: string) => void;\n}\n\ndeclare global {\n  interface Window {\n    google: any;\n  }\n}\n\nconst GoogleMap: React.FC<GoogleMapProps> = ({\n  properties,\n  onMarkerClick,\n  onClusterClick,\n  selectedMarkerId,\n  setSelectedMarkerId,\n  selectedClusterId,\n  setSelectedClusterId\n}) => {\n  const mapRef = useRef<HTMLDivElement>(null);\n  const mapInstance = useRef<google.maps.Map | null>(null);\n  const markersRef = useRef<google.maps.Marker[]>([]);\n  const isClusterClicking = useRef(false);\n  const [isMapLoaded, setIsMapLoaded] = useState(false);\n  const [mapError, setMapError] = useState<string | null>(null);\n\n  // 가격 포맷팅 함수\n  const formatPrice = useCallback((price: number) => {\n    if (price >= 100000000) {\n      return `${Math.floor(price / 100000000)}억원`;\n    } else if (price >= 10000) {\n      return `${Math.floor(price / 10000)}만원`;\n    }\n    return `${price.toLocaleString()}원`;\n  }, []);\n\n  // 마커 클러스터링 함수\n  const createClusterMarker = useCallback((properties: Property[], center: { lat: number; lng: number }) => {\n    const clusterId = properties.map(p => p.id).join(',');\n    const isSelected = selectedClusterId === clusterId;\n    \n    const marker = new window.google.maps.Marker({\n      position: center,\n      map: mapInstance.current,\n      icon: {\n        url: 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(\n          isSelected\n            ? `<svg width=\"44\" height=\"44\" viewBox=\"0 0 44 44\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <circle cx=\"22\" cy=\"22\" r=\"20\" fill=\"white\" stroke=\"#111\" stroke-width=\"3\"/>\n                <text x=\"22\" y=\"26\" text-anchor=\"middle\" fill=\"#111\" font-family=\"Arial, sans-serif\" font-size=\"14\" font-weight=\"bold\">${properties.length}</text>\n              </svg>`\n            : `<svg width=\"40\" height=\"40\" viewBox=\"0 0 40 40\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <circle cx=\"20\" cy=\"20\" r=\"18\" fill=\"#2563eb\" stroke=\"#1e40af\" stroke-width=\"3\"/>\n                <text x=\"20\" y=\"26\" text-anchor=\"middle\" fill=\"white\" font-family=\"Arial, sans-serif\" font-size=\"14\" font-weight=\"bold\">${properties.length}</text>\n              </svg>`\n        ),\n        scaledSize: isSelected\n          ? new window.google.maps.Size(44, 44)\n          : new window.google.maps.Size(40, 40),\n        anchor: isSelected\n          ? new window.google.maps.Point(22, 22)\n          : new window.google.maps.Point(20, 20)\n      }\n    });\n\n    // 클러스터 InfoWindow 생성\n    const infoWindow = new window.google.maps.InfoWindow({\n      content: `\n        <div style=\"padding: 10px; max-width: 250px; font-family: Arial, sans-serif;\">\n          <div style=\"font-weight: bold; font-size: 14px; margin-bottom: 5px; color: #1f2937;\">\n            ${properties.length}개 매물 클러스터\n          </div>\n          <div style=\"font-size: 12px; color: #6b7280; margin-bottom: 5px;\">\n            클릭하여 상세보기\n          </div>\n          <div style=\"font-size: 11px; color: #6b7280;\">\n            ${properties.slice(0, 3).map(p => p.title).join(', ')}\n            ${properties.length > 3 ? ` 외 ${properties.length - 3}개` : ''}\n          </div>\n        </div>\n      `\n    });\n\n    // 클러스터 마커 hover 이벤트\n    marker.addListener('mouseover', () => {\n      infoWindow.open(mapInstance.current, marker);\n    });\n\n    marker.addListener('mouseout', () => {\n      infoWindow.close();\n    });\n\n    marker.addListener('click', () => {\n      console.log(`클러스터 클릭: ${properties.length}개 매물`);\n      \n      isClusterClicking.current = true;\n      \n      if (properties.length === 1) {\n        if (onMarkerClick) {\n          onMarkerClick(properties[0]);\n        }\n      } else {\n        if (onClusterClick) {\n          onClusterClick(properties);\n        }\n      }\n      \n      setTimeout(() => {\n        isClusterClicking.current = false;\n      }, 1500);\n    });\n\n    return marker;\n  }, [onMarkerClick, onClusterClick, selectedClusterId, formatPrice]);\n\n  // 마커 클러스터링 로직\n  const clusterMarkers = (markers: any[], zoom: number) => {\n    const clusters: { center: { lat: number; lng: number }; properties: Property[] }[] = [];\n    \n    let clusterRadius: number;\n    if (zoom < 8) {\n      clusterRadius = 0.05;\n    } else if (zoom < 10) {\n      clusterRadius = 0.02;\n    } else if (zoom < 12) {\n      clusterRadius = 0.01;\n    } else if (zoom < 14) {\n      clusterRadius = 0.005;\n    } else if (zoom < 16) {\n      clusterRadius = 0.002;\n    } else if (zoom < 18) {\n      clusterRadius = 0.001;\n    } else {\n      clusterRadius = 0.00001;\n    }\n\n    properties.forEach((property, index) => {\n      let addedToCluster = false;\n      \n      for (const cluster of clusters) {\n        const distance = Math.sqrt(\n          Math.pow(property.location.lat - cluster.center.lat, 2) +\n          Math.pow(property.location.lng - cluster.center.lng, 2)\n        );\n        \n        if (distance < clusterRadius) {\n          cluster.properties.push(property);\n          cluster.center = {\n            lat: cluster.properties.reduce((sum, p) => sum + p.location.lat, 0) / cluster.properties.length,\n            lng: cluster.properties.reduce((sum, p) => sum + p.location.lng, 0) / cluster.properties.length\n          };\n          addedToCluster = true;\n          break;\n        }\n      }\n      \n      if (!addedToCluster) {\n        clusters.push({\n          center: property.location,\n          properties: [property]\n        });\n      }\n    });\n\n    return clusters;\n  };\n\n  // 지도 초기화\n  const initMap = useCallback(() => {\n    console.log('지도 초기화 시도...');\n    console.log('mapRef.current:', mapRef.current);\n    console.log('window.google:', window.google);\n    console.log('window.google.maps:', window.google?.maps);\n    \n    if (!mapRef.current) {\n      console.log('mapRef가 없음');\n      return false;\n    }\n    \n    if (!window.google) {\n      console.log('Google Maps API가 로드되지 않음');\n      return false;\n    }\n    \n    if (!window.google.maps) {\n      console.log('Google Maps 객체가 없음');\n      return false;\n    }\n\n    if (mapInstance.current) {\n      console.log('기존 지도 인스턴스 업데이트');\n      updateMarkers();\n      return true;\n    }\n\n    try {\n      console.log('새 지도 인스턴스 생성 시작...');\n      markersRef.current.forEach(marker => {\n        if (marker && marker.setMap) {\n          marker.setMap(null);\n        }\n      });\n      markersRef.current = [];\n\n      const map = new window.google.maps.Map(mapRef.current, {\n        center: { lat: 37.5665, lng: 126.9780 },\n        zoom: 10,\n        mapTypeId: window.google.maps.MapTypeId.ROADMAP,\n        zoomControl: true,\n        mapTypeControl: false,\n        scaleControl: false,\n        streetViewControl: false,\n        rotateControl: false,\n        fullscreenControl: false,\n        gestureHandling: 'greedy',\n        backgroundColor: '#f0f0f0',\n        disableDefaultUI: false,\n        maxZoom: 20,\n        minZoom: 8,\n        tilt: 0,\n        zoomControlOptions: {\n          position: window.google.maps.ControlPosition.RIGHT_TOP\n        },\n        disableDoubleClickZoom: false,\n        restriction: {\n          latLngBounds: {\n            north: 38.0,\n            south: 34.5,\n            east: 131.0,\n            west: 125.0\n          },\n          strictBounds: false\n        }\n      });\n\n      console.log('지도 인스턴스 생성 완료:', map);\n      mapInstance.current = map;\n      \n      // 지도가 완전히 로드된 후 마커 생성\n      map.addListener('idle', () => {\n        console.log('지도 로드 완료, 마커 생성 시작');\n        createMarkers();\n      });\n\n      map.addListener('zoom_changed', () => {\n        if (isClusterClicking.current) {\n          return;\n        }\n        \n        markersRef.current.forEach(marker => {\n          if (marker && marker.setMap) {\n            marker.setMap(null);\n          }\n        });\n        markersRef.current = [];\n\n        setTimeout(() => {\n          if (!isClusterClicking.current) {\n            createMarkers();\n          }\n        }, 300);\n      });\n\n      console.log('지도 초기화 완료');\n      setIsMapLoaded(true);\n      setMapError(null);\n      return true;\n    } catch (error) {\n      console.error('지도 초기화 오류:', error);\n      setMapError('지도를 로드할 수 없습니다. Google Maps API를 확인해주세요.');\n      setIsMapLoaded(false);\n      return false;\n    }\n  }, []);\n\n  const createMarkers = () => {\n    if (!mapInstance.current) {\n      console.log('mapInstance가 없어서 마커 생성 불가');\n      return;\n    }\n    \n    console.log('마커 생성 시작, properties 개수:', properties.length);\n    const currentZoom = mapInstance.current.getZoom() || 15;\n    console.log('현재 줌 레벨:', currentZoom);\n    \n    if (currentZoom >= 18) {\n      console.log('개별 마커 생성 모드');\n      properties.forEach((property, index) => {\n        console.log(`마커 ${index + 1} 생성:`, property.title, property.location);\n        const isSelected = selectedMarkerId === property.id;\n        const marker = new window.google.maps.Marker({\n          position: property.location,\n          map: mapInstance.current,\n          title: property.title,\n          icon: {\n            url: 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(\n              isSelected\n                ? `<svg width=\"44\" height=\"44\" viewBox=\"0 0 44 44\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><circle cx=\"22\" cy=\"22\" r=\"20\" fill=\"white\" stroke=\"#111\" stroke-width=\"3\"/><text x=\"22\" y=\"29\" text-anchor=\"middle\" fill=\"#111\" font-family=\"Arial, sans-serif\" font-size=\"16\" font-weight=\"bold\">1</text></svg>`\n                : `<svg width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><circle cx=\"15\" cy=\"15\" r=\"13\" fill=\"#2563eb\" stroke=\"#1e40af\" stroke-width=\"2\"/><text x=\"15\" y=\"19\" text-anchor=\"middle\" fill=\"white\" font-family=\"Arial, sans-serif\" font-size=\"10\" font-weight=\"bold\">1</text></svg>`\n            ),\n            scaledSize: isSelected\n              ? new window.google.maps.Size(44, 44)\n              : new window.google.maps.Size(30, 30),\n            anchor: isSelected\n              ? new window.google.maps.Point(22, 22)\n              : new window.google.maps.Point(15, 15)\n          }\n        });\n\n        // InfoWindow 생성\n        const infoWindow = new window.google.maps.InfoWindow({\n          content: `\n            <div style=\"padding: 10px; max-width: 200px; font-family: Arial, sans-serif;\">\n              <div style=\"font-weight: bold; font-size: 14px; margin-bottom: 5px; color: #1f2937;\">\n                ${property.title}\n              </div>\n              <div style=\"font-size: 12px; color: #6b7280; margin-bottom: 5px;\">\n                ${property.address.split(' ').slice(0, 3).join(' ')}\n              </div>\n              <div style=\"font-size: 12px; color: #2563eb; font-weight: bold;\">\n                ${property.type === 'rent' \n                  ? `보증금: ${formatPrice(property.deposit || 0)} / 월세: ${formatPrice(property.price)}`\n                  : `매매가: ${formatPrice(property.price)}`\n                }\n              </div>\n              <div style=\"font-size: 11px; color: #6b7280; margin-top: 3px;\">\n                ${Math.round(property.area / 3.3058)}평 (${property.area}㎡)\n                ${property.bedrooms ? ` / ${property.bedrooms}침실` : ''}\n                ${property.bathrooms ? ` / ${property.bathrooms}욕실` : ''}\n              </div>\n            </div>\n          `\n        });\n\n        // 마커 hover 이벤트\n        marker.addListener('mouseover', () => {\n          infoWindow.open(mapInstance.current, marker);\n        });\n\n        marker.addListener('mouseout', () => {\n          infoWindow.close();\n        });\n\n        if (onMarkerClick) {\n          marker.addListener('click', () => {\n            console.log(`개별 마커 클릭됨: ${property.id} - ${property.title}`);\n            isClusterClicking.current = true;\n            \n            if (setSelectedMarkerId) setSelectedMarkerId(property.id);\n            if (setSelectedClusterId) setSelectedClusterId('');\n            onMarkerClick(property);\n            \n            setTimeout(() => {\n              isClusterClicking.current = false;\n            }, 1500);\n          });\n        }\n\n        markersRef.current.push(marker);\n      });\n      console.log('개별 마커 생성 완료, 총 마커 개수:', markersRef.current.length);\n    } else {\n      console.log('클러스터 모드');\n      const clusters = clusterMarkers([], currentZoom);\n      console.log('생성된 클러스터 개수:', clusters.length);\n\n      clusters.forEach((cluster, clusterIndex) => {\n        console.log(`클러스터 ${clusterIndex + 1}: ${cluster.properties.length}개 매물`);\n        if (cluster.properties.length === 1) {\n          const property = cluster.properties[0];\n          const isSelected = selectedMarkerId === property.id;\n          const marker = new window.google.maps.Marker({\n            position: property.location,\n            map: mapInstance.current,\n            title: property.title,\n            icon: {\n              url: 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(\n                isSelected\n                  ? `<svg width=\"44\" height=\"44\" viewBox=\"0 0 44 44\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><circle cx=\"22\" cy=\"22\" r=\"20\" fill=\"white\" stroke=\"#111\" stroke-width=\"3\"/><text x=\"22\" y=\"29\" text-anchor=\"middle\" fill=\"#111\" font-family=\"Arial, sans-serif\" font-size=\"16\" font-weight=\"bold\">1</text></svg>`\n                  : `<svg width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><circle cx=\"15\" cy=\"15\" r=\"13\" fill=\"#2563eb\" stroke=\"#1e40af\" stroke-width=\"2\"/><text x=\"15\" y=\"19\" text-anchor=\"middle\" fill=\"white\" font-family=\"Arial, sans-serif\" font-size=\"10\" font-weight=\"bold\">1</text></svg>`\n              ),\n              scaledSize: isSelected\n                ? new window.google.maps.Size(44, 44)\n                : new window.google.maps.Size(30, 30),\n              anchor: isSelected\n                ? new window.google.maps.Point(22, 22)\n                : new window.google.maps.Point(15, 15)\n            }\n          });\n\n          // InfoWindow 생성\n          const infoWindow = new window.google.maps.InfoWindow({\n            content: `\n              <div style=\"padding: 10px; max-width: 200px; font-family: Arial, sans-serif;\">\n                <div style=\"font-weight: bold; font-size: 14px; margin-bottom: 5px; color: #1f2937;\">\n                  ${property.title}\n                </div>\n                <div style=\"font-size: 12px; color: #6b7280; margin-bottom: 5px;\">\n                  ${property.address.split(' ').slice(0, 3).join(' ')}\n                </div>\n                <div style=\"font-size: 12px; color: #2563eb; font-weight: bold;\">\n                  ${property.type === 'rent' \n                    ? `보증금: ${formatPrice(property.deposit || 0)} / 월세: ${formatPrice(property.price)}`\n                    : `매매가: ${formatPrice(property.price)}`\n                  }\n                </div>\n                <div style=\"font-size: 11px; color: #6b7280; margin-top: 3px;\">\n                  ${Math.round(property.area / 3.3058)}평 (${property.area}㎡)\n                  ${property.bedrooms ? ` / ${property.bedrooms}침실` : ''}\n                  ${property.bathrooms ? ` / ${property.bathrooms}욕실` : ''}\n                </div>\n              </div>\n            `\n          });\n\n          // 마커 hover 이벤트\n          marker.addListener('mouseover', () => {\n            infoWindow.open(mapInstance.current, marker);\n          });\n\n          marker.addListener('mouseout', () => {\n            infoWindow.close();\n          });\n\n          if (onMarkerClick) {\n            marker.addListener('click', () => {\n              console.log(`클러스터링된 단일 마커 클릭됨: ${property.id} - ${property.title}`);\n              isClusterClicking.current = true;\n              \n              if (setSelectedMarkerId) setSelectedMarkerId(property.id);\n              if (setSelectedClusterId) setSelectedClusterId('');\n              onMarkerClick(property);\n              \n              setTimeout(() => {\n                isClusterClicking.current = false;\n              }, 1500);\n            });\n          }\n\n          markersRef.current.push(marker);\n        } else {\n          const clusterMarker = createClusterMarker(cluster.properties, cluster.center);\n          markersRef.current.push(clusterMarker);\n        }\n      });\n      console.log('클러스터 마커 생성 완료, 총 마커 개수:', markersRef.current.length);\n    }\n  };\n\n  const updateMarkers = () => {\n    if (!mapInstance.current) return;\n    \n    markersRef.current.forEach(marker => {\n      if (marker && marker.setMap) {\n        marker.setMap(null);\n      }\n    });\n    markersRef.current = [];\n\n    createMarkers();\n  };\n\n  const checkAndInit = useCallback(() => {\n    console.log('Google Maps API 확인 중...');\n    if (window.google && window.google.maps) {\n      console.log('Google Maps API 로드됨, 지도 초기화 시도');\n      if (initMap()) {\n        console.log('지도 초기화 성공');\n        return;\n      }\n    } else {\n      console.log('Google Maps API 아직 로드되지 않음, 재시도...');\n    }\n    \n    setTimeout(checkAndInit, 100);\n  }, [initMap]);\n\n  useEffect(() => {\n    checkAndInit();\n\n    return () => {\n      markersRef.current.forEach(marker => {\n        if (marker && marker.setMap) {\n          marker.setMap(null);\n        }\n      });\n      markersRef.current = [];\n    };\n  }, [checkAndInit]);\n\n  // properties가 변경될 때 마커 업데이트\n  useEffect(() => {\n    if (mapInstance.current && isMapLoaded) {\n      updateMarkers();\n    }\n  }, [properties, selectedMarkerId, selectedClusterId, isMapLoaded]);\n\n  return (\n    <MapContainer>\n      {!isMapLoaded && mapError ? (\n        <FallbackMap>\n          <MapError>\n            <div style={{ marginBottom: '1rem', fontSize: '1.5rem' }}>🗺️</div>\n            <div style={{ marginBottom: '0.5rem', fontWeight: 'bold' }}>지도 로드 실패</div>\n            <div style={{ fontSize: '0.9rem', color: '#6b7280' }}>{mapError}</div>\n            <button \n              onClick={() => {\n                setMapError(null);\n                setIsMapLoaded(false);\n                checkAndInit();\n              }}\n              style={{\n                marginTop: '1rem',\n                padding: '0.5rem 1rem',\n                background: '#2563eb',\n                color: 'white',\n                border: 'none',\n                borderRadius: '4px',\n                cursor: 'pointer'\n              }}\n            >\n              다시 시도\n            </button>\n          </MapError>\n        </FallbackMap>\n      ) : (\n        <div ref={mapRef} style={{ width: '100%', height: '100%' }} />\n      )}\n    </MapContainer>\n  );\n};\n\nexport default GoogleMap;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}